#!/usr/bin/with-contenv bash

PUID=${PUID:-911}
PGID=${PGID:-911}

groupmod -o -g "$PGID" grfd
usermod -o -u "$PUID" grfd

echo '
-------------------------------------
Original baseimage by
          _         ()
         | |  ___   _    __
         | | / __| | |  /  \
         | | \__ \ | | | () |
         |_| |___/ |_|  \__/

Changed to fit the needs of Griefed.de
This fork was mainly created because I
wanted to gather experience in writing
my own baseimage.
Linuxserver.io provide top quality
images with great complexity, making
them perfect for learning.
-------------------------------------'

echo '
To support LSIO projects visit:
https://www.linuxserver.io/donate/
'

echo '
-------------------------------------
GID/UID
-------------------------------------'
echo "
User uid:    $(id -u grfd)
User gid:    $(id -g grfd)
-------------------------------------
"

time32="$(date +%Y)"

if [[ "${time32}" == "1970" || "${time32}" == "1969" ]] && [ "$(uname -m)" == "armv7l" ]; then
  echo '
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

Your DockerHost is most likely running an outdated version of libseccomp

To fix this, please visit https://docs.linuxserver.io/faq#libseccomp

Some apps might not behave correctly without this

@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
'
fi

chown grfd:grfd /app
chown grfd:grfd /config
chown grfd:grfd /data
chown grfd:grfd /defaults
